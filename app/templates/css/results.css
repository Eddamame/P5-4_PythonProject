/* --- Dashboard Grid Layout: Using FLEXBOX --- */
.dashboard-grid {
    display: flex; /* Activate Flexbox */
    flex-wrap: wrap; /* Allow items to wrap to the next line */
    gap: 20px; /* Space between items */
    padding: 20px;
    max-width: 1400px;
    margin: auto;
}

/* --- Chart Card Styles (Containers) --- */
.chart-card {
    background-color: white;
    padding: 20px;
    border-radius: 8px;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
    position: relative; 
    /* The height will be controlled by content or an explicit style */
    display: flex; /* Make the card itself a flex container for content alignment */
    flex-direction: column;
}

.chart-title {
    margin-top: 0;
    margin-bottom: 15px;
    color: #007bff;
    font-size: 1.2em;
}

/* --- Layout Specific Styles using Flex Basis --- */

/* 1. Predictive Model (Should take the full width) */
.large-chart {
    flex-basis: 100%; /* Takes up 100% of the container width */
    height: 550px; /* Explicit height for the main large chart */
}

/* 2. Equal Width Charts (SMA, Daily Returns, Max Profit, Market Price Runs) */
/* Apply this to all four remaining chart divs (plot2, plot3, plot4, plot5) */
.dashboard-grid > .chart-card:nth-child(n+2) {
    /* flex-grow: 1 -> allows the item to grow */
    /* flex-shrink: 0 -> prevents the item from shrinking unnecessarily */
    /* flex-basis: calc(25% - 15px) -> sets the base width to 1/4 of the container minus space for gaps */
    flex: 1 0 calc(25% - 15px); 
    height: 400px; /* Standard height for these four smaller charts */
}

/* --- Plotly Specific Fixes --- */
/* Target the div Plotly generates to ensure it fills the container's remaining space */
.chart-card > div {
    /* In a column-flex card, the Plotly div takes up the remaining vertical space */
    flex-grow: 1; 
    height: 100% !important; /* Override Plotly's default inline styles if necessary */
    width: 100% !important;
}

/* --- Responsiveness (Mobile View) --- */
@media (max-width: 992px) {
    /* On tablets/smaller screens, switch to two charts per row */
    .dashboard-grid > .chart-card:nth-child(n+2) {
        flex: 1 0 calc(50% - 10px); /* Sets width to 50% minus gap adjustment */
    }
}

@media (max-width: 576px) {
    /* On mobile, stack all charts vertically */
    .chart-card {
        flex-basis: 100% !important; 
        height: 350px !important; 
    }
}
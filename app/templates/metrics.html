<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Metrics</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/css_reset.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/global.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/index.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/metrics.css') }}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>

<body>
    <header>
        <img id="logo" src="{{ url_for('static', filename='images/logo.png') }}" alt="Logo">
        <hr>
    </header>

    <div class="card">
        <header class="text-center">
            <p class="subtitle" id="current-selection">
                Select one or more analyses to run for {{ ticker }} ({{ period }})
            </p>
        </header>

        <!-- Error message placeholder -->
        {% if error %}
        <div class="alert alert-danger">{{ error }}</div>
        {% endif %}

        <!-- Form for metric selection -->
        <form method="POST" action="/metrics">
            <div id="metrics-grid" class="metrics-grid">

                <!-- Predictive Model -->
                <label class="metric-card">
                    <input type="checkbox" name="predictive_model" value="1" class="metric-checkbox">
                    <i class="fa-solid fa-robot metric-icon"></i>
                    <h3 class="metric-title">Price Prediction</h3>
                    <p class="metric-desc">Forecast short-term future price movements using a model.</p>
                    <select name="prediction_window" class="sma-select">
                        <option value="">-- Select window size --</option>
                        <option value="10">10 days</option>
                        <option value="20">20 days</option>
                        <option value="30">30 days</option>
                    </select>
                </label>

                <!-- Simple Moving Average (SMA) -->
                <label class="metric-card">
                    <input type="checkbox" name="sma" value="1" class="metric-checkbox">
                    <i class="fa-solid fa-calculator metric-icon"></i>
                    <h3 class="metric-title">Moving Average (SMA)</h3>
                    <p class="metric-desc">Smooth out price data to identify trend direction.</p>
                    <select name="sma_window" class="sma-select">
                        <option value="">-- Select window size --</option>
                        <option value="20">20 days</option>
                        <option value="50">50 days</option>
                        <option value="100">100 days</option>
                        <option value="200">200 days</option>
                    </select>
                </label>

                <!-- Daily Returns -->
                <label class="metric-card">
                    <input type="checkbox" name="daily_returns" value="1" class="metric-checkbox">
                    <i class="fa-solid fa-chart-line metric-icon"></i>
                    <h3 class="metric-title">Daily Returns</h3>
                    <p class="metric-desc">Visualize day-to-day percentage changes in price.</p>
                </label>

                <!-- Market Price Runs -->
                <label class="metric-card">
                    <input type="checkbox" name="runs" value="1" class="metric-checkbox">
                    <i class="fa-solid fa-mountain-sun metric-icon"></i>
                    <h3 class="metric-title">Price Runs Analysis</h3>
                    <p class="metric-desc">Identify significant continuous up/down market movements.</p>
                    <!-- ADDED RUN LENGTH DROPDOWN -->
                    <select name="run_length" class="run-select">
                        <option value="">-- Min run length --</option>
                        <option value="3">3 days</option>
                        <option value="4">4 days</option>
                        <option value="5">5 days</option>
                        <option value="6">6 days</option>
                        <option value="7">7 days</option>
                    </select>
                </label>

                <!-- Max Profit -->
                <label class="metric-card">
                    <input type="checkbox" name="max_profit" value="1" class="metric-checkbox">
                    <i class="fa-solid fa-money-bill-trend-up metric-icon"></i>
                    <h3 class="metric-title">Maximum Profit</h3>
                    <p class="metric-desc">Calculate maximum profit through multiple buy/sell transactions (Valleyâ€“Peak).</p>
                </label>

            </div>

            <!-- Submit button -->
            <div class="form-actions text-center">
                <button type="submit" class="btn-submit">Run Analysis</button>
            </div>
        </form>
    </div>

    <footer>
        <hr>
        &copy; Stock Analysis. All rights reserved.
    </footer>
</body>

</html>
